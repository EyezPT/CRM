<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Para Mar칤a</title>
    <style>
        
    </style>
</head>
<link rel="stylesheet" href="styless.css">
<body>
    <div class="contenedor">
        <div class="corazon-principal" id="corazon"></div>
        <div class="carta" id="carta">
            <div class="texto-carta">
                <h1>Mi Amor</h1>
                <p>Soy corta y tarde en darme cuenta, pero esos sillones horribles hicieron que supiera que<br>
                    mi coraz칩n siempre ser칤a tuyo. <br>
                    Eres mi alegr칤a, mi paz y mi raz칩n para sonre칤r y levantarme cada d칤a.<br>
                    Gracias por existir y llenar mi vida de amor. Te amo 游눪</p>
                <p>Por siempre tuyo,<br>Shady</p>
            </div>
        </div>
    </div>

    <script>
        const corazon = document.getElementById('corazon');
        const carta = document.getElementById('carta');
        let corazones = [];
        let abierto = false;

        function crearCorazones() {
            const numCorazones = 100;
            const maxDistance = Math.max(window.innerWidth, window.innerHeight) * 0.8;
            
            for(let i = 0; i < numCorazones; i++) {
                const peque침o = document.createElement('div');
                peque침o.className = 'corazon-pequeno';
                
                const centerX = window.innerWidth / 2 - 15;
                const centerY = window.innerHeight / 2 - 13.5;
                
                peque침o.style.left = centerX + 'px';
                peque침o.style.top = centerY + 'px';
                
                const angle = Math.random() * Math.PI * 2;
                const distance = maxDistance * (0.5 + Math.random() * 0.5);
                const tx = Math.cos(angle) * distance;
                const ty = Math.sin(angle) * distance;
                
                peque침o.style.setProperty('--tx', tx + 'px');
                peque침o.style.setProperty('--ty', ty + 'px');
                
                document.body.appendChild(peque침o);
                corazones.push(peque침o);
                
                setTimeout(() => {
                    peque침o.style.animation = `explotar 3.5s ease-out forwards`;
                    peque침o.style.opacity = '1';
                }, i * 20);
            }
        }

        function removerCorazones() {
            corazones.forEach((corazon, index) => {
                setTimeout(() => {
                    corazon.style.animation = `reunir 2.5s ease-in forwards`;
                    setTimeout(() => corazon.remove(), 2500);
                }, index * 20);
            });
            corazones = [];
        }

        function toggleCarta() {
            abierto = !abierto;
            
            if(abierto) {
                corazon.style.opacity = '0';
                crearCorazones();
                setTimeout(() => carta.classList.add('visible'), 600);
            } else {
                corazon.style.opacity = '1';
                removerCorazones();
                carta.classList.remove('visible');
            }
        }

        corazon.addEventListener('click', toggleCarta);

        document.addEventListener('click', (e) => {
            if(abierto && !carta.contains(e.target) && e.target !== corazon) {
                toggleCarta();
            }
        });

        window.addEventListener('resize', () => {
            if(abierto) {
                removerCorazones();
                crearCorazones();
            }
        });
    </script>
</body>
</html>